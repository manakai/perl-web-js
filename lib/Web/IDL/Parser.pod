=head1 NAME

Web::IDL::Parser - A Web IDL parser

=head1 SYNOPSIS

  use Web::IDL::Parser;
  $parser = Web::IDL::Parser->new;
  $parser->parse_char_string ($idl_fragment);
  warn Dumper $parser->parsed_struct;

=head1 DESCRIPTION

The C<Web::IDL::Parser> module provides a Web IDL parser.

=head1 METHODS

Following methods are available:

=over 4

=item $parser = Web::IDL::Parser->new

Create a new Web IDL parser object.

=item $parser->onerror ($code)

=item $code = $parser->onerror

Get or set the error handler for the parser.  Any parse error, as well
as warning and additional processing information, is reported to the
handler.  See
<https://github.com/manakai/data-errors/blob/master/doc/onerror.txt>
for details of error handling.

The value should not be set while the parser is running.  If the value
is changed, the result is undefined.

=item $parser->parse_char_string ($input)

Parse a string of character as a Web IDL fragment.  The parsed result
can be then accessed by the C<parsed_struct> method.  Any parse error
is reported through the C<onerror> handler.

=item $parsed = $parser->parsed_struct

If the previous invocation of the C<parse_char_string> method
succeeded, the parsed data structure of the input Web IDL fragment is
returned.  Otherwise, C<undef> is returned.

Please note that the parsed result might contain Web IDL conformance
error, e.g. its interface names can be duplicated, or a referenced
type might not be defined at all.

=back

=head1 DATA STRUCTURE

The parsed data structure is a hash reference, with a key/value pair:
C<definitions>.  Its value is an array reference containing
definitions.

A definition is a hash reference with following key/value pairs:

=over 4

=item index

The index in the input character string at which the first character
for the definition appears.

=item definition_name

Type of the definition: C<interface>, C<exception>, C<dictionary>,
C<enum>, or C<callback>.

Note that the C<definition_name> for a C<callback interface> is
C<interface>.

=item partial

Whether the definition has the C<partial> keyword or not.

=item callback

Whether the definition is an interface and it has the C<callback>
keyword or not.  Note that for a non-interface callback, this value is
false.

=item name

The name of the defined construct.

=item super_name

The name of the member from which the member inherits, if any.

=item members

The array reference containing the members of the definition, if
applicable.

=item type

The builtin Web IDL type associated with the definition, if
applicable.

=item type_unrestricted, type_unsigned

The modifier for the C<type>, if any.

=item type_name

The name of the Web IDL type associated with the definition, if
applicable.

=item type_nullable

Whether the type is nullable or not.

=item value_strings

The allowed string values associated with the definition, if
applicable.

=item arguments

The array reference of the arguments, if applicable.

=back

A member is a hash reference with following key/value pairs:

=over 4

=item index

The index in the input character string at which the first character
for the member appears.

=item member_type

The type of the member: C<attribute>, C<operation>, C<const>,
C<field>, or C<dictionary_member>.

=item name

The name of the member, if applicable.

=item readonly, inherit, static

=item creator, getter, setter, deleter, stringifier, serializer

Whether the keyword is set to the member or not.

=item type

The builtin Web IDL type associated with the member, if applicable.

=item type_unrestricted, type_unsigned

The modifier for the C<type>, if any.

=item type_name

The name of the Web IDL type associated with the member, if
applicable.

=item type_nullable

Whether the type is nullable or not.

=item value

The builtin value associated with the member, if applicable.  One of:
C<true>, C<false>, C<null>, C<Infinity>, C<-Infinity>, or C<NaN>.

=item value_float

The value associated with the member, as a float, if applicable.

=item value_integer

The value associated with the member, as a integer, if applicable.

=item value_string

The value associated with the member, as a string, if applicable.

=item value_name

The value associated with the member, as an identifier, if applicable.

=item value_map

The serialization pattern (map) of the member, if applicable.

=item value_list

The serialization pattern (list) of the member, if applicable.

=item arguments

The array reference of the arguments, if applicable.

=back

An argument is a hash reference with following key/value pairs:

=over 4

=item index

The index in the input character string at which the first character
for the argument appears.

=item name

The name of the argument.

=item type

The builtin Web IDL type associated with the argument, if any.

=item type_unrestricted, type_unsigned

The modifier for the C<type>, if any.

=item type_name

The name of the Web IDL type associated with the argument, if any.

=item type_nullable

Whether the type is nullable or not.

=item optional

Whether the argument is optional or not.

=item value

The builtin value associated with the argument, if any.  One of:
C<true>, C<false>, C<null>, C<Infinity>, C<-Infinity>, or C<NaN>.

=item value_float

The value associated with the argument, as a float, if any.

=item value_integer

The value associated with the argument, as an integer, if any.

=item value_string

The value associated with the argument, as a string, if any.

=item variadic

Whether there is the C<...> token or not.

=back

A serialization pattern (either map or list) is a hash reference with
following key/value pairss:

=over 4

=item value_names

The array reference containing the values in the pattern.

=item inherit, attribute, getter

Whether the keyword is specified for the serialization pattern or not.

=back

=head1 SPECIFICATION

=over 4

=item WEBIDL

Web IDL <http://heycam.github.io/webidl/>.

=back

=head1 AUTHOR

Wakaba <wakaba@suikawiki.org>.

=head1 LICENSE

Copyright 2014 Wakaba <wakaba@suikawiki.org>.

This library is free software; you can redistribute it and/or modify
it under the same terms as Perl itself.

=cut
